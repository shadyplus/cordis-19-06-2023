!function(t){app.incompleteOrder={timer:null,lock:null,data:{},currentData:{},currentForm:null,processForm:function(e){this.currentForm=e;var a=t(e).find("input[name=phone]"),n=t(e).find("input[name=name]"),r=t(e).find("[name=offer]");if(a.length&&r.length){var i=orderValidator.validate(e);delete i.name,(i=orderValidator.getErrorsList(i)).length||(this.data.offer=r.val(),this.data.name=n.val(),this.data.phone=a.val(),clearTimeout(this.timer),this.timer=setTimeout(t.proxy(this.send,this),1e3))}},send:function(){var e=this.currentForm;if(e){e=t(e);var a=this.data.offer!=this.currentData.offer,n=this.data.name!=this.currentData.name,r=this.data.phone!=this.currentData.phone;if((a||n||r)&&!this.lock){this.lock=!0,t.extend(this.currentData,this.data);var i={};t.each(e.serializeArray(),(function(t,e){i[e.name]=e.value})),t.extend(i,this.currentData,{submitted:"",lead_token:app.leadToken}),console.log("test"),t.ajax({url:window.location.href,method:"POST",data:i,context:this}).done((function(t){console.log("done")})).always((function(){this.lock=!1}))}}}}}(app.jq);